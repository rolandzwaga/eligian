// Control Flow Type Testing - User Story 6
// Tests type checking in if/else and for loops

// Action with typed parameters and control flow
action testControlFlow(selector: string, count: number, items: array) [
  // Test 1: If statement with typed variables
  if (count > 10) {
    selectElement(selector)  // Should work - selector is string
    selectElement(count)      // Should error - count is number, expects string
  } else {
    setText(selector)         // Should work - selector is string
    setText(count)            // Should error - count is number, expects string
  }

  // Test 2: For loop with array
  for (item in items) {
    selectElement(item)  // What type is 'item'? Unknown? String?
  }

  // Test 3: For loop with literal array
  for (element in ["#box1", "#box2", "#box3"]) {
    selectElement(element)  // Should work - element should be string
    setAttr("class", element)  // Should work
  }

  // Test 4: Nested control flow
  if (count > 5) {
    for (item in items) {
      selectElement(selector)  // Should work
      selectElement(count)      // Should error
    }
  }
]

// Test calling the action
timeline "test" in "#container" using raf {
  at 0s..1s {
    testControlFlow("#box", 42, ["a", "b", "c"])
  }
}

// Expected errors:
// - Line 9: selectElement(count) - number not assignable to string
// - Line 12: setText(count) - number not assignable to string
// - Line 27: selectElement(count) - number not assignable to string
//
// Unknown/No errors (may need implementation):
// - Line 17: selectElement(item) - type of 'item' unknown
// - Line 22: selectElement(element) - type of 'element' unknown
